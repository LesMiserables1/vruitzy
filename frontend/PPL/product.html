<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Favicon -->
    <link rel="shortcut icon" href="./images/Logo.png" type="image/x-icon">

    <!-- Box icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" />
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">

    <!-- Custom StyleSheet -->
    <link rel="stylesheet" href="./css/styles.css" />
    <title>Products</title>
</head>

<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="navigation container">
            <div class="logo">
                <h1><a href="index.html"><img class="tanda" src="./images/logo.png" alt="">ruitzy</a></h1>
            </div>

            <div class="menu">
                <div class="top-nav">
                    <div class="logo">
                        <h1>vruitzy</h1>
                    </div>
                    <div class="close">
                        <i class="bx bx-x"></i>
                    </div>
                </div>

                <ul class="nav-list">
                    <li class="nav-item">
                        <a href="index.html" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="product.html" class="nav-link">Products</a>
                    </li>
                    <li class="nav-item">
                        <a href="profileBuyer.html" class="nav-link">Profile</a>
                    </li>
                    <li class="nav-item">
                        <a href="cart.html" class="nav-link">Cart</a>
                    </li>
                    <li class="nav-item">
                        <a href="awal.html" class="nav-link">Logout</a>
                    </li>
                    <li class="nav-item">
                        <a href="cart.html" class="nav-link icon"><i class="bx bx-shopping-bag"></i></a>
                    </li>
                </ul>
            </div>

            <a href="cart.html" class="cart-icon">
                <i class="bx bx-shopping-bag"></i>
            </a>

            <div class="hamburger">
                <i class="bx bx-menu"></i>
            </div>
        </div>
    </nav>

    <!-- All Products -->
    <section class="section all-products" id="products">
        <div class="top container">
            <h1>All Products</h1>
            <form style="width: 350px;">
                <input style="font-size: 2rem; width: 300px; height: 40px; border: 2px solid green; padding-left: 1%; " type="text" class="buah-name" placeholder="Search.." name="search">
                <button style="font-size: 2rem; width: 40px; height: 40px; border: 2px solid green; color: green;" type="submit"><i class="fa fa-search"></i></button>
              </form>
        </div>

        <div class="product-center container">
            <div class="product">
                <div class="product-header">
                    <img src="./images/Apple.jpg" alt="">
                    <ul class="icons">
                        <a href="cart.html"> <span><i class="bx bx-shopping-bag"></i></span>
                        </a>
                    </ul>
                </div>
                <div class="product-footer">
                    <a href="product-details.html">
                        <h3>Apple</h3>
                    </a>
                    <h4 class="price">Nama Toko</h4>
                    <h4 class="price">$50</h4>
                </div>
            </div>
            <div class="product">
                <div class="product-header">
                    <img src="./images/Oranges.jpg" alt="">

                    <ul class="icons">
                        <span><i class="bx bx-shopping-bag"></i></span>
                    </ul>
                </div>
                <div class="product-footer">
                    <h3>Oranges</h3>
                    <h4 class="price">Nama Toko</h4>
                    <h4 class="price">$50</h4>
                </div>
            </div>
            <div class="product">
                <div class="product-header">
                    <img src="./images/Lemons.png" alt="">

                    <ul class="icons">
                        <span><i class="bx bx-shopping-bag"></i></span>
                    </ul>
                </div>
                <div class="product-footer">
                    <h3>Lemons</h3>
                    <h4 class="price">Nama Toko</h4>
                    <h4 class="price">$50</h4>
                </div>
            </div>
            <div class="product">
                <div class="product-header">
                    <img src="./images/Pineapples.jpg" alt="">

                    <ul class="icons">
                        <span><i class="bx bx-shopping-bag"></i></span>
                    </ul>
                </div>
                <div class="product-footer">
                    <h3>Pineapples</h3>
                    <h4 class="price">Nama Toko</h4>
                    <h4 class="price">$50</h4>
                </div>
            </div>
            <div class="product">
                <div class="product-header">
                    <img src="./images/Peaches.jpg" alt="">

                    <ul class="icons">
                        <span><i class="bx bx-shopping-bag"></i></span>
                    </ul>
                </div>
                <div class="product-footer">
                    <h3>Peaches</h3>
                    <h4 class="price">Nama Toko</h4>
                    <h4 class="price">$50</h4>
                </div>
            </div>
            <div class="product">
                <div class="product-header">
                    <img src="./images/Tomatoes.jpg" alt="">

                    <ul class="icons">
                        <span><i class="bx bx-shopping-bag"></i></span>
                    </ul>
                </div>
                <div class="product-footer">
                    <h3>Tomatoes</h3>
                    <h4 class="price">Nama Toko</h4>
                    <h4 class="price">$50</h4>
                </div>
            </div>
            <div class="product">
                <div class="product-header">
                    <img src="./images/Bananas.jpg" alt="">

                    <ul class="icons">
                        <span><i class="bx bx-shopping-bag"></i></span>
                    </ul>
                </div>
                <div class="product-footer">
                    <h3>Bananas</h3>
                    <h4 class="price">Nama Toko</h4>
                    <h4 class="price">$50</h4>
                </div>
            </div>
            <div class="product">
                <div class="product-header">
                    <img src="./images/Cucumber.jpg" alt="">

                    <ul class="icons">
                        <span><i class="bx bx-shopping-bag"></i></span>
                    </ul>
                </div>
                <div class="product-footer">
                    <h3>Cucumber</h3>
                    <h4 class="price">Nama Toko</h4>
                    <h4 class="price">$50</h4>
                </div>
            </div>
        </div>
    </section>

    <section class="pagination" style="text-align: center;">
        <div class=" container">
            <span>1</span>
            <span>2</span>
            <span>3</span>
            <span>4</span>
            <span><i class='bx bx-right-arrow-alt'></i></span>
        </div>
    </section>



    <!-- Footer -->
    <footer class="footer-distributed">
 
        <div class="footer-left">
      
        <h3>Vruitzy</h3>
      
        <p class="footer-links">
          Vruitzy is an e-commerce platform that
          offers high-quality fresh fruits while
          staying at home!
        </p>
      
        
        </div>
      
        <div class="footer-center">
    
        </div>
        <div class="footer-right">
      
        <p class="footer-company-about">
        <span>Follow Us!</span>
        </p>
      
        <div class="footer-icons">
      
        <a href="#"><i class="fa fa-facebook"></i></a>
        <a href="#"><i class="fa fa-twitter"></i></a>
        <a href="#"><i class="fa fa-linkedin"></i></a>
        <a href="#"><i class="fa fa-github"></i></a>
      
        </div>
      
        </div>
        <p class="footer-company-name">Vruitzy &copy; 2020</p>
        </footer>
        <footer>
          <p>2020 &copy; Vruitzy | All rights reserved.</p>
        </footer>
    <!-- End Footer -->

    <!-- GSAP -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <!-- Custom Script -->
    <script src="./js/index.js"></script>

    <script>

         function saveProduct(productId) {
         
          localStorage.setItem('productId', productId);
          
        
         window.location.href = 'file:///C:/Users/Sherine%20Devi/PPL/vruitzy/frontend/PPL/product-details.html';
          //window.location.href = 'http://dev-story.my.id:3011/product-details.html';
        }

        
    const search = document.querySelector(".fa-search");

      search.onclick = ((e)=>{
        
        e.preventDefault()
        
        let buah = document.querySelector('.buah-name').value;
        console.log(buah)
        let data = {
            "query" : buah
        }
        let hasil = document.querySelector('.product-center')
        hasil.innerHTML = ''
        
        fetch('http://dev-story.my.id:3011/customer/search/product', {
          method: 'post',
          headers: {
            'Content-Type': 'application/json',
            'auth-token': localStorage.getItem('token')
          },
          body: JSON.stringify(data)
        })
          .then(async res => {
            let response = await res.json();
            console.log(response)
            if(response.status == 'ok'){
                
              response.data.forEach(product => {
           
              hasil.innerHTML += 
                    `<div class="product">
                <div class="product-header">
                    <img src="./images/Apple.jpg" alt="">
                    <ul class="icons">
                        <a onclick="saveProduct('${product.id}');"> <span><i class="bx bx-shopping-bag"></i></span>
                        </a>
                    </ul>
                </div>
                <div class="product-footer">
                    
                         <h3>${product.nama_product}</h3>
                    
                    <h4 class="price">${product.store.nama_toko}</h4>
                    <h4 class="price">${product.harga}/kg</h4>
                </div>
               </div>`
            })
            //window.location.href = 'http://dev-story.my.id:3011/product.html'
            //window.location.href =' file:///C:/Users/Sherine%20Devi/PPL/vruitzy/frontend/PPL/product.html'
            }
          })

          })
          fetch('http://dev-story.my.id:3011/customer/get/products', {
            
            method: 'post',
            headers: {
                'Content-Type': 'application/json',
                'auth-token': localStorage.getItem('token')
            },
            
            })
            .then(async res => {
                let response = await res.json();
                console.log(response)
                if(response.status == 'ok'){
                let hasil = document.querySelector('.product-center')
                response.data.forEach(product => {
                    hasil.innerHTML += 
                    `<div class="product">
                    <div class="product-header">
                        <img src="./images/Apple.jpg" alt="">
                        <ul class="icons">
                            <a onclick="saveProduct('${product.id}');"> <span><i class="bx bx-shopping-bag"></i></span>
                            </a>
                        </ul>
                    </div>
                    <div class="product-footer">
                        
                            <h3>${product.nama_product}</h3>
                        
                        <h4 class="price">${product.store.nama_toko}</h4>
                        <h4 class="price">${product.harga}/kg</h4>
                    </div>
                    </div>`

                
                })
                
                }
            })

 
  
      </script>
      
</body>

</html>